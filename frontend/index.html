<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExoDetect AI</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <header>
            <h1>üåü ExoDetect AI</h1>
            <p class="subtitle">NASA Exoplanet Detection Platform - Created by "1101 AI-pollo" team</p>
        </header>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="switchTab(event, 'classify')">Classify Data</button>
            <button class="tab-btn" onclick="switchTab(event, 'stats')">Model Statistics</button>
            <button class="tab-btn" onclick="switchTab(event, 'about')">About</button>
        </div>

        <!-- Classify Tab -->
        <div id="classify" class="tab-content active">
            <div class="card">
                <h2>Classify Exoplanet Data</h2>
                <p style="color: #8b95a5; margin-bottom: 20px;">Enter planetary data to classify whether it's likely an exoplanet candidate or false positive.</p>
                
                <div class="grid-2">
                    <div class="form-group">
                        <label>Metallicity [Fe/H] <span class="tooltip" title="Abundance of elements heavier than helium">‚ìò</span></label>
                        <input type="number" id="metallicity" placeholder="e.g., 0.05" step="0.001">
                    </div>
                    <div class="form-group">
                        <label>Effective Temperature (K) <span class="tooltip" title="Surface temperature of the host star">‚ìò</span></label>
                        <input type="number" id="eff_temp" placeholder="e.g., 5778" step="1">
                    </div>
                    <div class="form-group">
                        <label>g-k Color Index <span class="tooltip" title="Brightness difference between g and K bands">‚ìò</span></label>
                        <input type="number" id="gkcolor" placeholder="e.g., 1.45" step="0.001">
                    </div>
                    <div class="form-group">
                        <label>Extinction (mag) <span class="tooltip" title="Light absorbed or scattered by dust">‚ìò</span></label>
                        <input type="number" id="extinction" placeholder="e.g., 0.08" step="0.001">
                    </div>
                    <div class="form-group">
                        <label>g-r Color Index <span class="tooltip" title="g band minus r band magnitude">‚ìò</span></label>
                        <input type="number" id="grcolor" placeholder="e.g., 0.68" step="0.001">
                    </div>
                    <div class="form-group">
                        <label>Planet Radius (R‚äï) <span class="tooltip" title="Planet size in Earth radii">‚ìò</span></label>
                        <input type="number" id="radius" placeholder="e.g., 1.35" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label>j-k Color Index <span class="tooltip" title="Infrared brightness difference">‚ìò</span></label>
                        <input type="number" id="jkcolor" placeholder="e.g., 0.52" step="0.001">
                    </div>
                    <div class="form-group">
                        <label>Surface Gravity (log g) <span class="tooltip" title="Gravitational acceleration at the star's surface">‚ìò</span></label>
                        <input type="number" id="surface_gravity" placeholder="e.g., 4.3" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label>Reddening E(B‚àíV) <span class="tooltip" title="Color shift caused by interstellar dust">‚ìò</span></label>
                        <input type="number" id="reddening" placeholder="e.g., 0.04" step="0.001" min="0">
                    </div>
                </div>

                <button class="btn" onclick="classifyData()">Classify Exoplanet</button>

                <div id="classification-result"></div>
            </div>

            <div class="card">
                <h2>JSONL Quick Classify</h2>
                <p style="color: #8b95a5; margin-bottom: 20px;">Paste JSON Lines (one JSON object per line) containing the nine key features to classify multiple samples at once.</p>
                <textarea id="jsonl-input" rows="8" placeholder='{"metallicity": 0.05, "eff_temp": 5778, "gkcolor": 1.45, "extinction": 0.08, "grcolor": 0.68, "radius": 1.35, "jkcolor": 0.52, "surface_gravity": 4.3, "reddening": 0.04}' style="width: 100%; margin-bottom: 15px;"></textarea>
                <button class="btn" onclick="classifyJsonl()">Classify JSONL Data</button>
                <div id="jsonl-result"></div>
            </div>

            <div class="card">
                <h2>Batch Classification</h2>
                <p style="color: #8b95a5; margin-bottom: 20px;">Upload a CSV file with multiple data points for batch analysis.</p>
                
                <div class="file-upload" onclick="document.getElementById('csv-upload').click()">
                    <input type="file" id="csv-upload" accept=".csv" style="display: none;" onchange="handleFileUpload(this)">
                    <div style="font-size: 3em; margin-bottom: 10px;">üìÅ</div>
                    <div>Click to upload CSV file</div>
                    <small style="color: #8b95a5;">Supports Kepler, K2, and TESS data formats</small>
                </div>
                <div id="upload-status"></div>
            </div>
        </div>

        <!-- Stats Tab -->
        <div id="stats" class="tab-content">
            <div class="card">
                <h2>Model Performance Statistics</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Overall Accuracy</div>
                        <div class="stat-value" id="accuracy-stat">--</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Precision</div>
                        <div class="stat-value" id="precision-stat">--</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Recall</div>
                        <div class="stat-value" id="recall-stat">--</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">F1 Score</div>
                        <div class="stat-value" id="f1-stat">--</div>
                    </div>
                </div>

                <div class="model-summary-section">
                    <div class="model-summary-header-row">
                        <h3>Ensemble Snapshot</h3>
                        <div class="model-summary-legend">
                            <span class="legend-pill legend-pill-candidate">True Candidates</span>
                            <span class="legend-pill legend-pill-fp">False Alarms</span>
                            <span class="legend-pill legend-pill-fn">Missed Candidates</span>
                        </div>
                    </div>
                    <div id="model-summary" class="model-summary-grid"></div>
                </div>

                <div class="info-section" style="margin-top: 30px;">
                    <h3 style="color: #667eea; margin-bottom: 15px;">Model Information</h3>
                    <p><strong>Active Model:</strong> <span id="current-model">Not trained yet</span></p>
                    <p><strong>Decision Threshold:</strong> <span id="current-threshold">--</span></p>
                    <p><strong>Last Updated:</strong> <span id="last-updated">--</span></p>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>Select Model</label>
                    <select id="threshold-model" onchange="syncThresholdFromSelect()" style="width: 100%;"></select>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>Adjust Candidate Threshold</label>
                    <div class="slider-container">
                        <input type="range" class="slider" id="threshold-slider" min="10" max="90" value="50" oninput="updateThresholdPreview()">
                        <span class="slider-value" id="threshold-slider-value">0.50</span>
                    </div>
                    <button class="btn" style="margin-top: 10px;" onclick="applyThreshold()">Update Threshold</button>
                </div>

                <div id="model-metrics" style="margin-top: 20px;"></div>

                <div class="card" style="background: rgba(30, 35, 50, 0.8); margin-top: 20px;">
                    <h3 style="color: #667eea;">Confusion Matrix</h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px;">
                        <div class="stat-card"><strong>True Candidate</strong><br><span style="font-size: 1.5em; color: #10b981;" id="tp-stat">--</span></div>
                        <div class="stat-card"><strong>False Alarm</strong><br><span style="font-size: 1.5em; color: #ef4444;" id="fp-stat">--</span></div>
                        <div class="stat-card"><strong>Missed Candidate</strong><br><span style="font-size: 1.5em; color: #ef4444;" id="fn-stat">--</span></div>
                    </div>
                </div>

                <button class="btn" onclick="loadModelStats()" style="margin-top: 20px;">Refresh Statistics</button>
            </div>
        </div>

        <!-- About Tab -->
        <div id="about" class="tab-content">
            <div class="card">
                <h2>About ExoDetect AI</h2>
                <p style="line-height: 1.8; color: #b0b8c5;">
                    ExoDetect AI is an advanced machine learning platform designed by the 1101 AI-pollo team for the NASA Space Apps Challenge 2025 to automatically identify exoplanets from NASA mission data. The platform utilizes multiple algorithms trained on extensive datasets to classify planetary candidates with high accuracy.
                </p>

                <h3 style="color: #667eea; margin-top: 30px; margin-bottom: 15px;">Detection Method</h3>
                <p style="line-height: 1.8; color: #b0b8c5;">
                    The platform uses the transit method, detecting the slight dimming of starlight when a planet passes between a star and our satellites. By analysing the nine most informative stellar and planetary descriptors, the AI model separates promising candidates from signals that are likely false positives.
                </p>

                <h3 style="color: #667eea; margin-top: 30px; margin-bottom: 15px;">Data Sources</h3>
                <div style="display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap;">
                    <span class="dataset-badge">NASA Exoplanet Archive</span>
                    <span class="dataset-badge">Kepler Mission Data</span>
                    <span class="dataset-badge">K2 Mission Data</span>
                    <span class="dataset-badge">TESS TOI Catalog</span>
                </div>

                <div class="result-box" style="margin-top: 30px;">
                    <strong>üöÄ Mission:</strong> To accelerate exoplanet discovery through artificial intelligence and make space exploration accessible to everyone.
                </div>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>
